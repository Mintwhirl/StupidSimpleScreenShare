import{u as T,r as t,j as e}from"./main-CiC9Utmw.js";import{u as V,V as D}from"./useWebRTC-CL3U19iS.js";function P({config:b,onGoHome:p}){const{roomId:d}=T(),[n,x]=t.useState(!1),[r,j]=t.useState("disconnected"),[y,S]=t.useState(0),[m,c]=t.useState(null),[f,o]=t.useState("Start Sharing"),[i,l]=t.useState(null),a=t.useRef(null),{startScreenShare:w,stopScreenShare:N,connectionState:u,peerConnections:g,error:h}=V(d,"host",b);t.useEffect(()=>{j(u)},[u]),t.useEffect(()=>{S(Object.keys(g).length)},[g]),t.useEffect(()=>{h&&c(h)},[h]);const v=async()=>{try{c(null),o("Starting...");const s=await w();s&&a.current&&(a.current.srcObject=s,x(!0),o("Stop Sharing"))}catch(s){console.error("Error starting screen share:",s),c("Failed to start screen sharing. Please check your browser permissions."),o("Start Sharing")}},C=async()=>{try{await N(),a.current&&(a.current.srcObject=null),x(!1),o("Start Sharing")}catch(s){console.error("Error stopping screen share:",s),c("Failed to stop screen sharing.")}},k=()=>{n?C():v()},I=()=>{navigator.clipboard.writeText(d).then(()=>{l("success"),setTimeout(()=>l(null),2e3)}).catch(s=>{console.error("Failed to copy room ID:",s),l("error"),setTimeout(()=>l(null),2e3)})},E=t.useMemo(()=>{switch(r){case"connected":return"text-green-600";case"connecting":return"text-yellow-600";case"disconnected":return"text-red-600";default:return"text-gray-600"}},[r]),R=t.useMemo(()=>{switch(r){case"connected":return"Connected";case"connecting":return"Connecting...";case"disconnected":return"Disconnected";default:return"Unknown"}},[r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"üñ•Ô∏è Screen Sharing Room"}),e.jsx("p",{className:"text-gray-600",children:"Share your screen with others. Viewers can join using the room ID below."})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-medium ${E}`,children:["Status: ",R]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Viewers: ",y]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Room Information"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room ID"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:d,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-900 font-mono text-sm"}),e.jsx("button",{onClick:I,className:`px-4 py-2 text-white rounded-lg transition-colors ${i==="success"?"bg-green-600":i==="error"?"bg-red-600":"bg-blue-600 hover:bg-blue-700"}`,children:i==="success"?"Copied!":i==="error"?"Failed!":"Copy"})]})]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Share this room ID with others so they can view your screen."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Screen Share Controls"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{onClick:k,disabled:r==="connecting",className:`px-6 py-3 rounded-lg font-medium transition-colors ${n?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"} ${r==="connecting"?"opacity-50 cursor-not-allowed":""}`,children:r==="connecting"?"Connecting...":f}),n&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"Sharing Active"})]})]}),!n&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:'Click "Start Sharing" to begin sharing your screen with viewers.'})})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-800 font-medium",children:"Error"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:m})]})]})}),n&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Screen (Preview)"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{ref:a,className:"w-full max-w-2xl mx-auto rounded-lg border border-gray-200",muted:!0,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:"You are sharing this screen"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"üìã Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("p",{children:'‚Ä¢ Click "Start Sharing" to begin screen sharing'}),e.jsx("p",{children:"‚Ä¢ Select the screen or application you want to share"}),e.jsx("p",{children:"‚Ä¢ Share the Room ID with viewers so they can join"}),e.jsx("p",{children:"‚Ä¢ Use the Chat feature to communicate with viewers"}),e.jsx("p",{children:`‚Ä¢ Click "Stop Sharing" when you're done`})]})]}),e.jsx("div",{className:"flex justify-center space-x-4",children:e.jsx("button",{onClick:p,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Home"})})]})}export{P as default};
//# sourceMappingURL=HostView-yyfE0JfM.js.map
