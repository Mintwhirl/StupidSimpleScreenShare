import{r as t,j as e}from"./main-SUfdnE_Q.js";import{u as R,V as I}from"./useWebRTC-DLH5y22d.js";function T({roomId:i,config:u,onGoHome:g}){const[r,d]=t.useState(!1),[n,b]=t.useState("disconnected"),[p,j]=t.useState(0),[h,c]=t.useState(null),[y,o]=t.useState("Start Sharing"),a=t.useRef(null),{startScreenShare:f,stopScreenShare:S,connectionState:x,peerConnections:m,error:l}=R(i,"host",u);t.useEffect(()=>{b(x)},[x]),t.useEffect(()=>{j(Object.keys(m).length)},[m]),t.useEffect(()=>{l&&c(l)},[l]);const w=async()=>{try{c(null),o("Starting...");const s=await f();s&&a.current&&(a.current.srcObject=s,d(!0),o("Stop Sharing"))}catch(s){console.error("Error starting screen share:",s),c("Failed to start screen sharing. Please check your browser permissions."),o("Start Sharing")}},N=async()=>{try{await S(),a.current&&(a.current.srcObject=null),d(!1),o("Start Sharing")}catch(s){console.error("Error stopping screen share:",s),c("Failed to stop screen sharing.")}},v=()=>{r?N():w()},C=()=>{navigator.clipboard.writeText(i).then(()=>{console.log("Room ID copied to clipboard")}).catch(s=>{console.error("Failed to copy room ID:",s)})},k=()=>{switch(n){case"connected":return"text-green-600";case"connecting":return"text-yellow-600";case"disconnected":return"text-red-600";default:return"text-gray-600"}},E=()=>{switch(n){case"connected":return"Connected";case"connecting":return"Connecting...";case"disconnected":return"Disconnected";default:return"Unknown"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"üñ•Ô∏è Screen Sharing Room"}),e.jsx("p",{className:"text-gray-600",children:"Share your screen with others. Viewers can join using the room ID below."})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-medium ${k()}`,children:["Status: ",E()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Viewers: ",p]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Room Information"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room ID"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:i,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-900 font-mono text-sm"}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Copy"})]})]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Share this room ID with others so they can view your screen."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Screen Share Controls"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{onClick:v,disabled:n==="connecting",className:`px-6 py-3 rounded-lg font-medium transition-colors ${r?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"} ${n==="connecting"?"opacity-50 cursor-not-allowed":""}`,children:n==="connecting"?"Connecting...":y}),r&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"Sharing Active"})]})]}),!r&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:'Click "Start Sharing" to begin sharing your screen with viewers.'})})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-800 font-medium",children:"Error"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:h})]})]})}),r&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Screen (Preview)"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{ref:a,className:"w-full max-w-2xl mx-auto rounded-lg border border-gray-200",muted:!0,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:"You are sharing this screen"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"üìã Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("p",{children:'‚Ä¢ Click "Start Sharing" to begin screen sharing'}),e.jsx("p",{children:"‚Ä¢ Select the screen or application you want to share"}),e.jsx("p",{children:"‚Ä¢ Share the Room ID with viewers so they can join"}),e.jsx("p",{children:"‚Ä¢ Use the Chat feature to communicate with viewers"}),e.jsx("p",{children:`‚Ä¢ Click "Stop Sharing" when you're done`})]})]}),e.jsx("div",{className:"flex justify-center space-x-4",children:e.jsx("button",{onClick:g,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Home"})})]})}export{T as default};
//# sourceMappingURL=HostView-BgJsHY94.js.map
