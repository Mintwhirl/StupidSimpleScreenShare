import{u as T,r as s,j as e}from"./main-CjCzK5oF.js";import{u as V,V as D}from"./useWebRTC-DwbhVGax.js";function P({config:g,onGoHome:b}){const{roomId:l}=T(),[n,x]=s.useState(!1),[o,p]=s.useState("disconnected"),[y,j]=s.useState(0),[h,c]=s.useState(null),[f,i]=s.useState("Start Sharing"),a=s.useRef(null),{startScreenShare:S,stopScreenShare:w,connectionState:u,peerConnections:m,error:d}=V(l,"host",g);s.useEffect(()=>{p(u)},[u]),s.useEffect(()=>{j(Object.keys(m).length)},[m]),s.useEffect(()=>{d&&c(d)},[d]);const N=async()=>{try{c(null),i("Starting...");const t=await S();t&&a.current&&(a.current.srcObject=t,x(!0),i("Stop Sharing"))}catch(t){console.error("Error starting screen share:",t),c("Failed to start screen sharing. Please check your browser permissions."),i("Start Sharing")}},v=async()=>{try{await w(),a.current&&(a.current.srcObject=null),x(!1),i("Start Sharing")}catch(t){console.error("Error stopping screen share:",t),c("Failed to stop screen sharing.")}},C=()=>{n?v():N()},k=()=>{navigator.clipboard.writeText(l).then(()=>{const t=document.querySelector("[data-copy-button]");if(t){const r=t.textContent;t.textContent="Copied!",t.style.backgroundColor="#10b981",setTimeout(()=>{t.textContent=r,t.style.backgroundColor=""},2e3)}}).catch(t=>{console.error("Failed to copy room ID:",t);const r=document.querySelector("[data-copy-button]");if(r){const R=r.textContent;r.textContent="Failed!",r.style.backgroundColor="#ef4444",setTimeout(()=>{r.textContent=R,r.style.backgroundColor=""},2e3)}})},I=()=>{switch(o){case"connected":return"text-green-600";case"connecting":return"text-yellow-600";case"disconnected":return"text-red-600";default:return"text-gray-600"}},E=()=>{switch(o){case"connected":return"Connected";case"connecting":return"Connecting...";case"disconnected":return"Disconnected";default:return"Unknown"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"üñ•Ô∏è Screen Sharing Room"}),e.jsx("p",{className:"text-gray-600",children:"Share your screen with others. Viewers can join using the room ID below."})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-medium ${I()}`,children:["Status: ",E()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Viewers: ",y]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Room Information"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room ID"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-900 font-mono text-sm"}),e.jsx("button",{onClick:k,"data-copy-button":!0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Copy"})]})]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Share this room ID with others so they can view your screen."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Screen Share Controls"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{onClick:C,disabled:o==="connecting",className:`px-6 py-3 rounded-lg font-medium transition-colors ${n?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"} ${o==="connecting"?"opacity-50 cursor-not-allowed":""}`,children:o==="connecting"?"Connecting...":f}),n&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"Sharing Active"})]})]}),!n&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:'Click "Start Sharing" to begin sharing your screen with viewers.'})})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-800 font-medium",children:"Error"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:h})]})]})}),n&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Screen (Preview)"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{ref:a,className:"w-full max-w-2xl mx-auto rounded-lg border border-gray-200",muted:!0,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:"You are sharing this screen"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"üìã Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("p",{children:'‚Ä¢ Click "Start Sharing" to begin screen sharing'}),e.jsx("p",{children:"‚Ä¢ Select the screen or application you want to share"}),e.jsx("p",{children:"‚Ä¢ Share the Room ID with viewers so they can join"}),e.jsx("p",{children:"‚Ä¢ Use the Chat feature to communicate with viewers"}),e.jsx("p",{children:`‚Ä¢ Click "Stop Sharing" when you're done`})]})]}),e.jsx("div",{className:"flex justify-center space-x-4",children:e.jsx("button",{onClick:b,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Home"})})]})}export{P as default};
//# sourceMappingURL=HostView-DWF6RSNq.js.map
